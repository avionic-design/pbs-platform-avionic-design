PACKAGE = medcom-wide-rootfs
VERSION = 9.2.1
DATE = $(shell date +%d.%m.%Y)

dirs = \
	/bin \
	/debug \
	/dev \
	/etc \
	/etc/X11 \
	/etc/X11/Xsession.d \
	/etc/X11/xorg.conf.d \
	/etc/adobe \
	/etc/fonts \
	/etc/fonts/conf.d \
	/etc/gtk-2.0 \
	/etc/gtk-3.0 \
	/etc/iflinkd \
	/etc/iflinkd/hooks.d \
	/etc/iflinkd/hooks.d/br0 \
	/etc/iflinkd/hooks.d/eth0 \
	/etc/iflinkd/hooks.d/eth1 \
	/etc/iflinkd/hooks.d/lo \
	/etc/logrotate.d \
	/etc/modprobe.d \
	/etc/modules-load.d \
	/etc/rsyslog.d \
	/etc/snmp/ \
	/etc/systemd \
	/etc/systemd/system \
	/etc/systemd/system/basic.target.wants \
	/etc/systemd/system/lldpd.service.wants \
	/etc/systemd/system/local-fs.target.wants \
	/etc/systemd/system/multi-user.target.wants \
	/etc/systemd/system/sockets.target.wants \
	/etc/pango \
	/etc/pam.d \
	/etc/remote-control.conf.d \
	/etc/tmpfiles.d \
	/etc/udev \
	/etc/udev/rules.d \
	/etc/xdg \
	/etc/xdg/awesome \
	/media \
	/media/disk \
	/persist \
	/proc \
	/root \
	/run \
	/sbin \
	/sys \
	/tmp \
	/usr \
	/usr/bin \
	/usr/lib \
	/usr/lib/dhcpcd \
	/usr/lib/dhcpcd/dhcpcd-hooks \
	/usr/lib/firmware \
	/usr/lib/gdk-pixbuf-2.0/2.10.0 \
	/usr/lib/lsb \
	/usr/lib/systemd \
	/usr/sbin \
	/var \
	/var/lib \
	/var/lock \
	/var/log \
	/var/spool

scripts = \
	/etc/X11/Xsession \
	/etc/iflinkd/hooks.d/00-lldpd \
	/etc/iflinkd/hooks.d/10-dhcpcd \
	/etc/iflinkd/hooks.d/50-bridge \
	/etc/iflinkd/hooks.d/eth1/00-speed \
	/etc/xdg/awesome/xinitrc \
	/usr/lib/dhcpcd/dhcpcd-hooks/90-ntp \
	/usr/lib/systemd/gdk-pixbuf-loaders-cache \
	/usr/lib/systemd/pango-modules-cache \
	/usr/lib/systemd/update-crontab \
	/usr/lib/systemd/update-mime-db \
	/usr/bin/enable-lan \
	/usr/bin/ntpdate-wrapper \
	/usr/bin/reset-medcom \
	/usr/bin/zramstart \
	/usr/bin/zramstat \
	/usr/bin/zramstop \
	/usr/sbin/set-x-monitor-config \
	/usr/sbin/sensorpads-backlight \
	/usr/sbin/sshd-keygen \
	/usr/sbin/handset

files = \
	/fastboot \
	/etc/X11/Xsession.d/00-persist \
	/etc/X11/Xsession.d/20-unexport-gpios \
	/etc/X11/Xsession.d/50-determine-startup \
	/etc/X11/Xsession.d/90-calibrate \
	/etc/X11/Xsession.d/99-start \
	/etc/X11/xorg.conf.d/05-evdev.conf \
	/etc/X11/xorg.conf.d/10-egalax.conf \
	/etc/X11/xorg.conf.d/20-monitor.conf \
	/etc/X11/xorg.conf.d/80-server.conf \
	/etc/X11/xorg.conf.d/99-keyboard-de.conf \
	/etc/X11/xorg.conf.available/monitor-inverted.conf \
	/etc/adobe/mms.cfg \
	/etc/asound.conf \
	/etc/asound.conf.usb \
	/etc/crontab \
	/etc/fonts/conf.d/99-antialiasing.conf \
	/etc/fstab \
	/etc/group \
	/etc/gtk-2.0/gtkrc \
	/etc/gtk-3.0/settings.ini \
	/etc/host.conf \
	/etc/hosts \
	/etc/htoprc \
	/etc/inittab \
	/etc/linphone.conf \
	/etc/linphone.conf.usb \
	/etc/localtime \
	/etc/logrotate.conf \
	/etc/logrotate.d/general \
	/etc/modprobe.d/tm6000.conf \
	/etc/modules-load.d/input.conf \
	/etc/nsswitch.conf \
	/etc/passwd \
	/etc/pam.conf \
	/etc/pam.d/common-account \
	/etc/pam.d/common-auth \
	/etc/pam.d/common-password \
	/etc/pam.d/common-session \
	/etc/pam.d/nodm \
	/etc/pam.d/other \
	/etc/profile \
	/etc/remote-control.conf.d/bgu-handset.conf \
	/etc/remote-control.conf.d/gpio.conf \
	/etc/remote-control.conf.d/input.conf \
	/etc/remote-control.conf.d/linphone.conf \
	/etc/remote-control.conf.d/lldp.conf \
	/etc/remote-control.conf.d/logging.conf \
	/etc/remote-control.conf.d/mmt.conf \
	/etc/remote-control.conf.d/modem.conf \
	/etc/remote-control.conf.d/smartcard.conf \
	/etc/rsyslog.conf \
	/etc/rsyslog.d/50-remote-control.conf \
	/etc/rsyslog.d/50-xsession.conf \
	/etc/rsyslog.d/99-persist.conf \
	/etc/services \
	/etc/shadow \
	/etc/ssh/sshd_config \
	/etc/snmp/snmpd.conf \
	/etc/sysctl.conf \
	/etc/systemd/system.conf \
	/etc/systemd/journald.conf \
	/etc/systemd/system/crond.service \
	/etc/systemd/system/debug.mount \
	/etc/systemd/system/drop-caches.service \
	/etc/systemd/system/drop-caches.timer \
	/etc/systemd/system/gdk-pixbuf.service \
	/etc/systemd/system/iflinkd@br0.service \
	/etc/systemd/system/iflinkd@eth0.service \
	/etc/systemd/system/iflinkd@eth1.service \
	/etc/systemd/system/iflinkd@lo.service \
	/etc/systemd/system/lldpd.service \
	/etc/systemd/system/lldpd.socket \
	/etc/systemd/system/logrotate.service \
	/etc/systemd/system/logrotate.timer \
	/etc/systemd/system/nodm.service \
	/etc/systemd/system/ntpd.service \
	/etc/systemd/system/ntpdate.service \
	/etc/systemd/system/openssh.service \
	/etc/systemd/system/pango.service \
	/etc/systemd/system/root.mount \
	/etc/systemd/system/sensorpads-backlight.service \
	/etc/systemd/system/sensors.service \
	/etc/systemd/system/snmpd.service \
	/etc/systemd/system/tmp.mount \
	/etc/systemd/system/update-crontab.service \
	/etc/systemd/system/update-mime-db.service \
	/etc/systemd/system/var-lib.mount \
	/etc/systemd/system/var-log.mount \
	/etc/systemd/system/var-spool.mount \
	/etc/systemd/system/zram.service \
	/etc/tmpfiles.d/dbus.conf \
	/etc/tmpfiles.d/lldpd.conf \
	/etc/tmpfiles.d/ntp.conf \
	/etc/tmpfiles.d/ssh.conf \
	/etc/tmpfiles.d/systemd.conf \
	/etc/tmux.conf \
	/etc/udev/rules.d/70-persistent-net.rules \
	/etc/udev/rules.d/80-usb-devices.rules \
	/etc/vconsole.conf \
	/usr/lib/lsb/init-functions \
	/usr/lib/firmware/dvb-usb-ad1456.fw \
	/usr/lib/firmware/xc3028L-v36.fw \
	/usr/share/alsa/ucm/tegra-wm8903/hifi.conf \
	/usr/share/alsa/ucm/tegra-wm8903/linein.conf \
	/usr/share/alsa/ucm/tegra-wm8903/tegra-wm8903.conf \
	/usr/share/alsa/ucm/tegra-wm8903/voice-call.conf \
	/usr/share/alsa/ucm/tegra-wm8903/voice-call-ip.conf

links = \
	/bin/sh \
	/bin/enable-lan \
	/etc/X11/xorg.conf.d/90-undefined.conf \
	/etc/X11/xorg.conf.d/99-calibration.conf \
	/etc/hostname \
	/etc/iflinkd/hooks.d/br0/00-lldpd \
	/etc/iflinkd/hooks.d/br0/10-dhcpcd \
	/etc/iflinkd/hooks.d/eth0/50-bridge \
	/etc/iflinkd/hooks.d/eth1/50-bridge \
	/etc/machine-id \
	/etc/motd \
	/etc/mtab \
	/etc/network \
	/etc/ntp.conf \
	/etc/browser.conf \
	/etc/remote-control.conf \
	/etc/resolv.conf \
	/etc/systemd/system/basic.target.wants/drop-caches.timer \
	/etc/systemd/system/basic.target.wants/logrotate.timer \
	/etc/systemd/system/basic.target.wants/zram.service \
	/etc/systemd/system/graphical.target.wants/gdk-pixbuf.service \
	/etc/systemd/system/graphical.target.wants/pango.service \
	/etc/systemd/system/graphical.target.wants/update-mime-db.service \
	/etc/systemd/system/lldpd.service.wants/snmpd.service \
	/etc/systemd/system/local-fs.target.wants/debug.mount \
	/etc/systemd/system/local-fs.target.wants/root.mount \
	/etc/systemd/system/local-fs.target.wants/tmp.mount \
	/etc/systemd/system/local-fs.target.wants/var-lib.mount \
	/etc/systemd/system/local-fs.target.wants/var-log.mount \
	/etc/systemd/system/local-fs.target.wants/var-spool.mount \
	/etc/systemd/system/multi-user.target.wants/network.target \
	/etc/systemd/system/multi-user.target.wants/sensorpads-backlight.service \
	/etc/systemd/system/multi-user.target.wants/sensors.service \
	/etc/systemd/system/multi-user.target.wants/serial-getty@ttyS0.service \
	/etc/systemd/system/multi-user.target.wants/openssh.service \
	/etc/systemd/system/multi-user.target.wants/update-crontab.service \
	/etc/systemd/system/network.target.wants/iflinkd@br0.service \
	/etc/systemd/system/network.target.wants/iflinkd@eth0.service \
	/etc/systemd/system/network.target.wants/iflinkd@eth1.service \
	/etc/systemd/system/network.target.wants/iflinkd@lo.service \
	/etc/systemd/system/network.target.wants/ntpd.service \
	/etc/systemd/system/network.target.wants/ntpdate.service \
	/etc/systemd/system/sockets.target.wants/lldpd.socket \
	/etc/systemd/system/display-manager.service \
	/etc/systemd/system/syslog.service \
	/etc/pango/pango.modules \
	/etc/proxy.conf \
	/usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache \
	/var/run \
	/init \
	/sbin/halt \
	/sbin/init \
	/sbin/poweroff \
	/sbin/reboot \
	/sbin/runlevel \
	/sbin/shutdown

include include/config/auto.conf
include platforms/common.mk

quiet_cmd_edit = SED     $@
      cmd_edit = $(SED) 's|@VERSION@|$(VERSION)|;s|@DATE@|$(DATE)|' $< > $@

$(DESTDIR)/etc/os-release: $(obj)/src/etc/os-release.in $(obj)/Makefile
	$(call cmd,edit)

$(pkgtree)/.do-install: $(DESTDIR)/etc/os-release
